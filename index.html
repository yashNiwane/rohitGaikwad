<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarah & Michael's Engagement</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        .font-cursive {
            font-family: 'Dancing Script', cursive;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
        }
        
        /* Enhanced glass morphism effect */
        .backdrop-blur-md {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        /* Button hover effects */
        .btn-hover-effect {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-hover-effect:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .btn-hover-effect:hover:after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(100, 100);
                opacity: 0;
            }
        }
        
        /* Text animations */
        .text-glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #e60073, 0 0 20px #e60073;
            }
            to {
                text-shadow: 0 0 10px #fff, 0 0 20px #ff4da6, 0 0 30px #ff4da6, 0 0 40px #ff4da6;
            }
        }
        
        .float-text {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        /* Heart animations */
        .heart-beat {
            animation: heartBeat 3s ease-in-out infinite;
        }
        
        @keyframes heartBeat {
            0% { transform: scale(1); }
            14% { transform: scale(1.15); }
            28% { transform: scale(1); }
            42% { transform: scale(1.15); }
            70% { transform: scale(1); }
        }
        
        .heart-trail {
            position: relative;
        }
        
        .heart-trail::after {
            content: attr(data-emoji);
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0.15;
            filter: blur(2px);
            transform: scale(0.9) translate(-3px, -3px);
            animation: trail 3.5s infinite ease-out;
        }
        
        @keyframes trail {
            0% { opacity: 0.15; transform: scale(0.9) translate(-3px, -3px); }
            100% { opacity: 0; transform: scale(0.7) translate(-10px, -7px); }
        }
        
        .heart-float {
            animation: float 6s ease-in-out infinite;
            transition: all 0.5s ease;
        }
        
        .heart-pulse {
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(1.08); }
            100% { opacity: 0.7; transform: scale(1); }
        }
        
        .heart-spin {
            animation: spin 12s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .heart-bounce {
            animation: bounce 5s ease-in-out infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-7px); }
        }
        
        .heart-fade {
            animation: fade 5s ease-in-out infinite;
        }
        
        @keyframes fade {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.9; }
        }
        
        /* Heart entry animation */
        .heart-entry {
            animation: entryAnimation 1.8s ease-out forwards;
        }
        
        @keyframes entryAnimation {
            0% { transform: scale(0) rotate(-20deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(10deg); opacity: 0.5; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        /* Panel shimmer effect */
        .panel-shine {
            position: relative;
            overflow: hidden;
        }
        
        /* Gentle panel pulse */
        .panel-gentle-pulse {
            animation: gentlePulse 10s ease-in-out infinite;
        }
        
        @keyframes gentlePulse {
            0%, 100% { box-shadow: 0 10px 30px rgba(248, 113, 193, 0.2); }
            50% { box-shadow: 0 10px 35px rgba(248, 113, 193, 0.35); }
        }
        
        /* Image transition effects */
        .gallery-image {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .panel-shine::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            animation: shine 6s linear infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }
        
        /* Responsive adjustments */
        @media (max-height: 600px) {
            .responsive-panel {
                position: absolute;
                top: 0;
                transform: translateX(-50%) !important;
                margin-top: 1rem;
            }
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 20;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .modal.show {
            display: flex;
            opacity: 1;
        }
        
        .modal-content {
            background-color: rgba(255, 242, 245, 0.9);
            backdrop-filter: blur(12px);
            margin: auto;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: scale(0.7);
            transition: transform 0.3s ease;
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .close {
            color: #ec4899;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .audio-player {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(236, 72, 153, 0.1);
            padding: 10px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(236, 72, 153, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .audio-player audio {
            height: 30px;
        }

        .audio-title {
            color: #ec4899;
            font-size: 0.875rem;
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(236, 72, 153, 0.3);
        }
    </style>
</head>
<body>
    <div id="container" class="w-full h-screen">
        <canvas id="canvas"></canvas>
    </div>
    
    <!-- Event Details Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 class="text-2xl text-pink-800 font-cursive mb-4">Engagement Ceremony Details</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-lg text-pink-700 font-medium">When</h3>
                    <p class="text-gray-800">Saturday, June 15, 2024 at 5:00 PM</p>
                </div>
                <div>
                    <h3 class="text-lg text-pink-700 font-medium">Where</h3>
                    <p class="text-gray-800">The Grand Hall</p>
                    <p class="text-gray-800">123 Celebration Avenue</p>
                    <p class="text-gray-800">Cityville, State 12345</p>
                </div>
                <div>
                    <h3 class="text-lg text-pink-700 font-medium">Attire</h3>
                    <p class="text-gray-800">Semi-formal</p>
                </div>
                <div>
                    <h3 class="text-lg text-pink-700 font-medium">RSVP</h3>
                    <p class="text-gray-800">Please respond by May 15, 2024</p>
                    <p class="text-gray-800">Email: rohit@example.com</p>
                </div>
            </div>
        </div>
    </div>

    <div class="audio-player">
        <span class="audio-title">‚ô´ Toss</span>
        <audio controls autoplay loop>
            <source src="toss.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>

    <script>
        // Three.js setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ 
            canvas: document.getElementById('canvas'),
            alpha: true 
        });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        
        // Gradient background using Tailwind classes on container
        document.getElementById('container').className = 
            'w-full h-screen bg-gradient-to-br from-pink-200 via-pink-300 to-pink-400';

        // Create stars
        const starGeometry = new THREE.SphereGeometry(0.1, 32, 32);
        const starMaterial = new THREE.MeshBasicMaterial({ 
            color: 0xffffff,
            transparent: true,
            opacity: 0.8
        });

        function createStars() {
            for (let i = 0; i < 600; i++) {
                const star = new THREE.Mesh(starGeometry, starMaterial);
                star.position.set(
                    Math.random() * 100 - 50,
                    Math.random() * 100 - 50,
                    Math.random() * 100 - 50
                );
                star.scale.setScalar(Math.random() * 0.5 + 0.5);
                scene.add(star);
            }
        }

        // Create bubbles
        const bubbleGeometry = new THREE.SphereGeometry(0.5, 32, 32);
        const bubbleMaterial = new THREE.MeshBasicMaterial({
            color: 0xffffff,
            transparent: true,
            opacity: 0.3,
            shininess: 100
        });

        function createBubbles() {
            for (let i = 0; i < 50; i++) {
                const bubble = new THREE.Mesh(bubbleGeometry, bubbleMaterial);
                bubble.position.set(
                    Math.random() * 80 - 40,
                    Math.random() * 80 - 40,
                    Math.random() * 80 - 40
                );
                bubble.scale.setScalar(Math.random() * 0.5 + 0.3);
                scene.add(bubble);
            }
        }

        // Add center glassy panel
        function createGlassyPanel() {
            // Create a container div for the panel
            const panel = document.createElement('div');
            panel.className = 'absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[95%] sm:w-[90%] max-w-4xl bg-pink-100 bg-opacity-30 backdrop-blur-md rounded-3xl p-4 sm:p-6 md:p-8 shadow-lg panel-shine panel-gentle-pulse responsive-panel';
            panel.style.zIndex = '10';
            panel.style.border = '1px solid rgba(255, 255, 255, 0.2)';
            
            // Add content to the panel
            panel.innerHTML = `
                <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                    <div class="text-left w-full md:w-4/8">
                        <h1 class="text-3xl sm:text-4xl md:text-5xl font-cursive text-pink-800 opacity-80 mb-2 md:mb-3 float-text">Our Engagement<br>Celebration</h1>
                        <p class="text-pink-700 mt-3 md:mt-4 text-xs sm:text-sm opacity-90">Join us as we celebrate the beginning of<br>our forever journey together</p>
                        
                        <div class="mt-4 mb-4">
                            <p class="text-pink-800 text-sm sm:text-base font-medium">Rohit and Vrushali</p>
                            <p class="text-pink-700 text-xs sm:text-sm">June 15, 2025 ‚Ä¢ The Grand Hall</p>
                            <div class="mt-3 flex items-center justify-start">
                                <div id="countdown" class="bg-pink-100 bg-opacity-60 text-pink-800 text-xs rounded-lg px-3 py-1 inline-block"></div>
                            </div>
                        </div>
                        
                        <div class="mt-5 md:mt-6 space-y-2 md:space-y-3">
                            <a href="photos_page.html" class="block">
                                <button class="w-full bg-pink-500 hover:bg-pink-600 text-white py-2 md:py-2.5 px-4 md:px-6 rounded-full shadow-md transition text-sm sm:text-base">
                                    View Photos ‚ú®
                                </button>
                            </a>
                            <a href="love_story.html" class="block">
                                <button class="w-full bg-pink-400 hover:bg-pink-500 text-white py-2 md:py-2.5 px-4 md:px-6 rounded-full shadow-md transition text-sm sm:text-base">
                                    Our Love Story üíï
                                </button>
                            </a>
                            <a href="rsvp.html" class="block">
                                <button class="w-full bg-pink-400 hover:bg-pink-500 text-white py-2 md:py-2.5 px-4 md:px-6 rounded-full shadow-md transition text-sm sm:text-base">
                                    RSVP Now üìÖ
                                </button>
                            </a>
                        </div>
                    </div>
                    
                    <div class="relative w-full md:w-4/8 h-56 sm:h-64 md:h-80 mt-6 md:mt-0">
                        <div id="images-container" class="relative w-full h-full">
                            <div class="bg-pink-200 bg-opacity-50 rounded-xl overflow-hidden shadow-md border border-pink-300 border-opacity-50 hover:scale-105 transition-transform duration-300 w-full h-full">
                                <img src="https://i.pinimg.com/originals/44/1c/2f/441c2f1b7578cfd939570f5650b2a9b8.jpg" alt="Engagement photo" class="w-full h-full object-cover gallery-image">
                                <div id="hearts-container" class="absolute inset-0 w-full h-full pointer-events-none overflow-hidden">
                                    <!-- Hearts will be added here dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('container').appendChild(panel);
            
            // Add floating hearts animation
            createFloatingHearts();
            
            // Add image changing functionality
            addImageChangeFunctionality();
            
            // Add countdown timer
            updateCountdown();
            
            // Add modal functionality
            setupModal();
        }
        
        // Add floating hearts animation
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('hearts-container');
            const heartEmojis = ['‚ù§Ô∏è', 'üíï', 'üíñ'];
            
            // Adjust hearts for different screen sizes
            const isMobile = window.innerWidth < 768;
            const heartCount = isMobile ? 6 : 10;
            
            // Clear heartsContainer first
            heartsContainer.innerHTML = '';
            
            // Track animation frames to optimize performance
            const animations = [];
            
            // Add hearts with staggered timing for smoother entry
            function addHeartWithDelay(index) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    
                    // Choose random animation style
                    const animStyles = ['heart-beat', 'heart-pulse', 'heart-float', 'heart-spin', 'heart-bounce', 'heart-fade'];
                    const randomStyle = animStyles[Math.floor(Math.random() * animStyles.length)];
                    
                    // Randomly add trail effect to some hearts
                    const hasTrail = Math.random() > 0.8;
                    const trailClass = hasTrail ? 'heart-trail' : '';
                    
                    heart.className = `absolute ${randomStyle} ${trailClass} heart-entry`;
                    
                    const emoji = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                    heart.innerHTML = emoji;
                    heart.setAttribute('data-emoji', emoji); // For trail effect
                    
                    heart.style.fontSize = `${Math.random() * 1 + 0.8}rem`;
                    heart.style.opacity = `${Math.random() * 0.2 + 0.7}`;
                    
                    // Position hearts within the image container bounds
                    // Keeping a larger margin from edges to prevent overflow during animation
                    const margin = 20; // percentage margin from edges
                    heart.style.left = `${margin + Math.random() * (100 -  margin)}%`;
                    heart.style.top = `${margin + Math.random() * (100 -  margin)}%`;
                    heart.style.zIndex = '10'; // Make sure hearts appear above images
                    
                    // Set random animation delay for variations
                    heart.style.animationDelay = `${Math.random() * 5}s`;
                    
                    // Add subtle float animation with smoother easing and controlled boundaries
                    const speed = 0.00006 + Math.random() * 0.00003;
                    // Smaller amplitude to keep hearts more centered
                    const amplitude = isMobile ? 1.5 + Math.random() * 2 : 2 + Math.random() * 2.5;
                    
                    // Start time for animation
                    let startTime = Date.now();
                    
                    // Store animation function for this heart
                    const animateFunction = function() {
                        const elapsed = Date.now() - startTime;
                        const xOffset = Math.sin(elapsed * speed + index) * amplitude;
                        const yOffset = Math.cos(elapsed * speed + index * 2) * amplitude;
                        heart.style.transform = `translate(${xOffset}px, ${yOffset}px)`;
                    };
                    
                    // Add to animations array
                    animations.push(animateFunction);
                    heartsContainer.appendChild(heart);
                }, index * 180); // Stagger heart creation with longer delays
            }
            
            // Create hearts with staggered timing
            for (let i = 0; i < heartCount; i++) {
                addHeartWithDelay(i);
            }
            
            // Single animation frame for all hearts for better performance
            function animateAllHearts() {
                animations.forEach(anim => anim());
                requestAnimationFrame(animateAllHearts);
            }
            
            requestAnimationFrame(animateAllHearts);
        }

        // Function to change images when Change Mood button is clicked
        function addImageChangeFunctionality() {
            const changeMoodBtn = document.getElementById('change-mood-btn');
            
            // Engagement ceremony themed images
            const engagementImages = [
                "https://i.pinimg.com/originals/44/1c/2f/441c2f1b7578cfd939570f5650b2a9b8.jpg", // Engagement ring
                "https://images.pexels.com/photos/1444442/pexels-photo-1444442.jpeg", // Couple holding hands
                "https://images.pexels.com/photos/3014856/pexels-photo-3014856.jpeg" // Engagement celebration
            ];
            
            let currentImageIndex = 0;
            
            // Set initial image
            const img = document.querySelector('#images-container img');
            img.src = engagementImages[0];
            
            changeMoodBtn.addEventListener('click', () => {
                currentImageIndex = (currentImageIndex + 1) % engagementImages.length;
                
                // Add a transition effect
                img.style.opacity = '0';
                
                setTimeout(() => {
                    img.src = engagementImages[currentImageIndex];
                    img.style.opacity = '1';
                }, 300);
                
                // Add a button click effect
                changeMoodBtn.classList.add('scale-95');
                setTimeout(() => {
                    changeMoodBtn.classList.remove('scale-95');
                }, 200);
            });
        }

        // Countdown timer function
        function updateCountdown() {
            const eventDate = new Date('June 15, 2025 17:00:00').getTime();
            const countdownElement = document.getElementById('countdown');
            
            function updateTimer() {
                const now = new Date().getTime();
                const distance = eventDate - now;
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                
                if (distance > 0) {
                    countdownElement.innerHTML = `${days} days, ${hours} hours, ${minutes} minutes until our special day`;
                } else {
                    countdownElement.innerHTML = "Our engagement celebration has begun!";
                }
            }
            
            updateTimer();
            setInterval(updateTimer, 60000);
        }

        // Modal setup
        function setupModal() {
            const modal = document.getElementById("eventModal");
            const btn = document.getElementById("event-details-btn");
            const span = document.getElementsByClassName("close")[0];
            
            btn.onclick = function() {
                modal.classList.add("show");
            }
            
            span.onclick = function() {
                modal.classList.remove("show");
            }
            
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.classList.remove("show");
                }
            }
        }

        // Initialize
        camera.position.z = 50;
        createStars();
        createBubbles();
        createGlassyPanel();

        // Animation
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate stars and bubbles more slowly
            scene.children.forEach(child => {
                child.rotation.x += 0.0005;
                child.rotation.y += 0.0005;
                child.position.y += 0.005;
                if (child.position.y > 50) child.position.y = -50;
            });

            renderer.render(scene, camera);
        }

        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            
            // Check if hearts container exists and update hearts on resize
            const heartsContainer = document.getElementById('hearts-container');
            if (heartsContainer) {
                // Clear existing hearts
                heartsContainer.innerHTML = '';
                // Re-create hearts for the new screen size
                createFloatingHearts();
            }
        });
    </script>
</body>
</html>